(function(global,undefined){"use strict";function hasOwn(obj,prop){return hasOwnProperty.call(obj,prop)}function isFunction(obj){return"[object Function]"===toString.call(obj)}function unique(arr){var obj={};return forEach(arr,function(item){obj[item]=1}),keys(obj)}function emitData(event,data,prop){return emit(event,data),data[prop||keys(data)[0]]}function dirname(path){var s=path.match(DIRNAME_RE);return(s?s[0]:".")+"/"}function realpath(path){if(path.lastIndexOf("//")>7&&(path=path.replace(MULTIPLE_SLASH_RE,"$1/")),-1===path.indexOf("."))return path;for(var part,original=path.split("/"),ret=[],i=0;original.length>i;i++)if(part=original[i],".."===part){if(0===ret.length)throw Error("The path is invalid: "+path);ret.pop()}else"."!==part&&ret.push(part);return ret.join("/")}function normalize(uri){uri=realpath(uri);var lastChar=uri.charAt(uri.length-1);return"#"===lastChar?uri=uri.slice(0,-1):URI_END_RE.test(uri)||-1!==uri.indexOf("?")||(uri+=".js"),uri=uri.replace(":80/","/")}function parseAlias(id){var alias=configData.alias;return alias&&hasOwn(alias,id)&&isTopLevel(id)&&(id=alias[id]),id}function parseVars(id){var vars=configData.vars;return vars&&id.indexOf("{")>-1&&(id=id.replace(VARS_RE,function(m,key){return hasOwn(vars,key)?vars[key]:"{"+key+"}"})),id}function addBase(id,refUri){var ret;return isAbsolute(id)?ret=id:isRelative(id)?(0===id.indexOf("./")&&(id=id.substring(2)),ret=dirname(refUri)+id):ret=isRoot(id)?refUri.match(ROOT_RE)[1]+id:configData.base+id,ret}function parseMap(uri){var map=configData.map||[],ret=uri,len=map.length;if(len)for(var i=0;len>i;i++){var rule=map[i];if(ret=isFunction(rule)?rule(uri)||uri:uri.replace(rule[0],rule[1]),ret!==uri)break}return ret}function id2Uri(id,refUri){return id?(id=parseAlias(id),id=parseVars(id),id=addBase(id,refUri||pageUri),id=normalize(id),id=parseMap(id)):""}function isAbsolute(id){return id.indexOf("://")>0||0===id.indexOf("//")}function isRelative(id){return 0===id.indexOf("./")||0===id.indexOf("../")}function isRoot(id){return"/"===id.charAt(0)&&"/"!==id.charAt(1)}function isTopLevel(id){var c=id.charAt(0);return-1===id.indexOf("://")&&"."!==c&&"/"!==c}function getScriptAbsoluteSrc(node){return node.hasAttribute?node.src:node.getAttribute("src",4)}function request(url,callback,charset){var isCSS=IS_CSS_RE.test(url),node=doc.createElement(isCSS?"link":"script");if(charset){var cs=isFunction(charset)?charset(url):charset;cs&&(node.charset=cs)}assetOnload(node,callback),isCSS?(node.rel="stylesheet",node.href=url):(node.async="async",node.src=url),currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null}function assetOnload(node,callback){"SCRIPT"===node.nodeName?scriptOnload(node,callback):styleOnload(node,callback)}function scriptOnload(node,callback){node.onload=node.onerror=node.onreadystatechange=function(){READY_STATE_RE.test(node.readyState)&&(node.onload=node.onerror=node.onreadystatechange=null,configData.debug||head.removeChild(node),node=undefined,callback&&callback())}}function styleOnload(node,callback){isOldWebKit||isOldFirefox?(log("Start css polling"),setTimeout(function(){pollCss(node,callback)},1)):node.onload=node.onerror=function(){node.onload=node.onerror=null,node=undefined,callback&&callback()}}function pollCss(node,callback){var isLoaded,sheet=node.sheet;if(isOldWebKit)sheet&&(isLoaded=!0);else if(sheet)try{sheet.cssRules&&(isLoaded=!0)}catch(ex){"NS_ERROR_DOM_SECURITY_ERR"===ex.name&&(isLoaded=!0)}setTimeout(function(){isLoaded?callback():pollCss(node,callback)},1)}function getCurrentScript(){if(currentlyAddingScript)return currentlyAddingScript;if(interactiveScript&&"interactive"===interactiveScript.readyState)return interactiveScript;for(var scripts=head.getElementsByTagName("script"),i=scripts.length-1;i>=0;i--){var script=scripts[i];if("interactive"===script.readyState)return interactiveScript=script}}function parseDependencies(code){var m,ret=[];for(REQUIRE_RE.lastIndex=0,code=code.replace(SLASH_RE,"");m=REQUIRE_RE.exec(code);)m[2]&&ret.push(m[2]);return unique(ret)}function Module(uri,status){this.uri=uri,this.status=status||STATUS.LOADING,this.dependencies=[],this.waitings=[]}function resolve(ids,refUri){if(isArray(ids)){for(var ret=[],i=0,len=ids.length;len>i;i++)ret[i]=resolve(ids[i],refUri);return ret}return id2Uri(ids,refUri)}function load(uris,callback,options){function done(mod){mod&&mod.status<STATUS.LOADED&&(mod.status=STATUS.LOADED),0===--remain&&callback()}options=options||{};var unloadedUris=options.filtered?uris:getUnloadedUris(uris);if(0===unloadedUris.length)return callback(),undefined;emit("load",unloadedUris);for(var len=unloadedUris.length,remain=len,i=0;len>i;i++)(function(uri){function onFetched(){if(mod.status<STATUS.SAVED)return done(),undefined;if(isCircularWaiting(mod))return printCircularLog(circularStack),circularStack.length=0,done(mod),undefined;var waitings=mod.waitings=getUnloadedUris(mod.dependencies);return 0===waitings.length?(done(mod),undefined):(load(waitings,function(){done(mod)},{filtered:!0}),undefined)}var mod=cachedModules[uri];mod.status<STATUS.SAVED?fetch(uri,onFetched):onFetched()})(unloadedUris[i])}function fetch(uri,callback){function onRequested(){delete fetchingList[requestUri],fetchedList[requestUri]=!0,anonymousModuleMeta&&(save(uri,anonymousModuleMeta),anonymousModuleMeta=null);var fn,fns=callbackList[requestUri];for(delete callbackList[requestUri];fn=fns.shift();)fn()}var requestUri=emitData("fetch",{uri:uri,fetchedList:fetchedList},"uri");if(fetchedList[requestUri])return callback(),undefined;if(fetchingList[requestUri])return callbackList[requestUri].push(callback),undefined;fetchingList[requestUri]=!0,callbackList[requestUri]=[callback];var charset=configData.charset,requested=emitData("request",{uri:requestUri,callback:onRequested,charset:charset},"requested");requested||request(requestUri,onRequested,charset)}function define(id,deps,factory){var argsLen=arguments.length;1===argsLen?(factory=id,id=undefined):2===argsLen&&(factory=deps,deps=undefined,isArray(id)&&(deps=id,id=undefined)),!isArray(deps)&&isFunction(factory)&&(deps=parseDependencies(""+factory));var derivedUri,meta={id:id,dependencies:deps,factory:factory};if(!id&&doc.attachEvent){var script=getCurrentScript();script&&script.src?(derivedUri=getScriptAbsoluteSrc(script),derivedUri=emitData("derived",{uri:derivedUri})):log("Failed to derive script URI: ",""+factory)}var resolvedUri=id?resolve(id):derivedUri;resolvedUri?save(resolvedUri,meta):anonymousModuleMeta=meta}function save(uri,meta){var mod=getModule(uri);mod.status<STATUS.SAVED&&(mod.id=meta.id||uri,mod.dependencies=resolve(meta.dependencies||[],uri),mod.factory=meta.factory,mod.status=STATUS.SAVED)}function compile(mod){function require(id){var child=cachedModules[require.resolve(id)];return child===undefined?null:(child.parent=mod,compile(child))}if(!mod)return null;if(mod.status>=STATUS.COMPILING)return mod.exports;if(emit("compile",mod),mod.status<STATUS.LOADED&&mod.exports===undefined)return null;mod.status=STATUS.COMPILING,require.async=function(ids,callback){return mod.load(ids,callback),require},require.resolve=function(id){return resolve(id,mod.uri)},require.cache=cachedModules;var factory=mod.factory,exports=factory===undefined?mod.exports:factory;return isFunction(factory)&&(exports=factory(require,mod.exports={},mod)),mod.exports=exports===undefined?mod.exports:exports,mod.status=STATUS.COMPILED,emit("compiled",mod),mod.exports}function getModule(uri,status){return cachedModules[uri]||(cachedModules[uri]=new Module(uri,status))}function getUnloadedUris(uris){var ret=[];return forEach(uris,function(uri){uri&&getModule(uri).status<STATUS.LOADED&&ret.push(uri)}),ret}function isCircularWaiting(mod){var waitings=mod.waitings;if(0===waitings.length)return!1;if(circularStack.push(mod.uri),isOverlap(waitings,circularStack))return!0;for(var i=0;waitings.length>i;i++)if(isCircularWaiting(cachedModules[waitings[i]]))return!0;return circularStack.pop(),!1}function printCircularLog(stack){stack.push(stack[0]),log("Found circular dependencies:",stack.join(" --> "))}function isOverlap(arrA,arrB){var arrC=arrA.concat(arrB);return unique(arrC).length<arrC.length}function preload(callback){var preloadModules=configData.preload,len=preloadModules.length;len?globalModule.load(preloadModules.splice(0,len),callback):callback()}function checkConfigConflict(prev,curr,k,key){prev!==curr&&log("The config of "+key+'["'+k+'"] is changed from "'+prev+'" to "'+curr+'"',"warn")}function makeBaseAbsolute(){var base=configData.base;isAbsolute(base)||(configData.base=id2Uri((isRoot(base)?"":"./")+base+("/"===base.charAt(base.length-1)?"":"/")))}function getBootstrapPlugins(){var ret=[],str=global.location.search;return str=str.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),str+=" "+doc.cookie,str.replace(/seajs-(\w+)=1/g,function(m,name){ret.push("{seajs}/plugin-"+name)}),unique(ret)}if(!global.seajs){var seajs=global.seajs={version:"2.0.0-dev"},emptyArr=[],emptyObj={},toString=emptyObj.toString,hasOwnProperty=emptyObj.hasOwnProperty,slice=emptyArr.slice,isArray=Array.isArray||function(obj){return"[object Array]"===toString.call(obj)},forEach=emptyArr.forEach?function(arr,fn){arr.forEach(fn)}:function(arr,fn){for(var i=0,len=arr.length;len>i;i++)fn(arr[i],i,arr)},keys=Object.keys||function(obj){var ret=[];for(var p in obj)hasOwn(obj,p)&&ret.push(p);return ret},console=global.console,log=seajs.log=function(){if(console===undefined)return seajs;var args=slice.call(arguments),len=args.length,type=console[args[len-1]]?args.pop():"log";if("log"===type&&!configData.debug)return seajs;var fn=console[type];return fn=fn.apply?fn:Function.prototype.bind.call(fn,console),fn.apply(console,args),seajs},eventsCache={};seajs.on=function(event,callback){if(!callback)return seajs;var list=eventsCache[event]||(eventsCache[event]=[]);return list.push(callback),seajs},seajs.off=function(event,callback){if(!event&&!callback)return eventsCache={},seajs;var list=eventsCache[event];if(list)if(callback)for(var i=list.length-1;i>=0;i--)list[i]===callback&&list.splice(i,1);else delete eventsCache[event];return seajs};var currentlyAddingScript,interactiveScript,emit=seajs.emit=function(event){var list=eventsCache[event];if(!list)return seajs;for(var args=[],i=1,len=arguments.length;len>i;i++)args[i-1]=arguments[i];return list=list.slice(),forEach(list,function(fn){fn.apply(global,args)}),seajs},DIRNAME_RE=/[^?]*(?=\/.*$)/,MULTIPLE_SLASH_RE=/([^:\/])\/\/+/g,URI_END_RE=/\.(?:css|js)|\/$/,ROOT_RE=/^(.*?:\/\/.*?)(?:\/|$)/,VARS_RE=/{([^{}]+)}/g,doc=document,pageUri=function(loc){var pathname=loc.pathname;"/"!==pathname.charAt(0)&&(pathname="/"+pathname);var pageUri=loc.protocol+"//"+loc.host+pathname;return pageUri.indexOf("\\")>-1&&(pageUri=pageUri.replace(/\\/g,"/")),pageUri}(global.location),loaderScript=doc.getElementById("seajs-node")||function(){var scripts=doc.getElementsByTagName("script");return scripts[scripts.length-1]||doc.createElement("script")}(),loaderUri=getScriptAbsoluteSrc(loaderScript)||pageUri,head=doc.head||doc.getElementsByTagName("head")[0]||doc.documentElement,baseElement=head.getElementsByTagName("base")[0],IS_CSS_RE=/\.css(?:\?|$)/i,READY_STATE_RE=/loaded|complete|undefined/,UA=navigator.userAgent,isOldWebKit=536>Number(UA.replace(/.*AppleWebKit\/(\d+)\..*/,"$1")),isOldFirefox=UA.indexOf("Firefox")>0&&!("onload"in doc.createElement("link")),REQUIRE_RE=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,SLASH_RE=/\\\\/g,cachedModules=seajs.cache={},STATUS={LOADING:1,SAVED:2,LOADED:3,COMPILING:4,COMPILED:5};Module.prototype.load=function(ids,callback){var uris=resolve(isArray(ids)?ids:[ids],this.uri);return load(uris,function(){var exports=[];forEach(uris,function(uri,i){exports[i]=compile(cachedModules[uri])}),callback&&callback.apply(global,exports)}),this};var fetchingList={},fetchedList={},callbackList={},anonymousModuleMeta=null,circularStack=[],globalModule=new Module(pageUri,STATUS.COMPILED);seajs.use=function(ids,callback){return preload(function(){globalModule.load(ids,callback)}),seajs},global.define=define;var configData={base:function(){var ret=dirname(loaderUri),m=ret.match(/^(.+\/)seajs\/\d[^/]+\/$/);return m&&(ret=m[1]),ret}(),charset:"utf-8"};seajs.config=function(obj){for(var key in obj)if(hasOwn(obj,key)){var prev=configData[key],curr=obj[key];if(!prev||"alias"!==key&&"vars"!==key)!prev||"map"!==key&&"preload"!==key?configData[key]=curr:(isArray(curr)||(curr=[curr]),forEach(curr,function(item){prev.push(item)}));else for(var k in curr)if(hasOwn(curr,k)){var val=curr[k];k in prev&&checkConfigConflict(prev[k],val,k,key),prev[k]=val}}return obj&&obj.base&&makeBaseAbsolute(),seajs},seajs.config.data=configData,seajs.config({vars:{seajs:dirname(loaderUri)},preload:getBootstrapPlugins()});var dataMain=loaderScript.getAttribute("data-main");dataMain&&seajs.use(dataMain)}})(this);