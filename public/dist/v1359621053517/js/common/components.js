define(function(t,e){var i=Class.create({initialize:function(t){var e={top:void 0,left:void 0,autoHide:void 0,title:"提示",frameTPL:new Template('<div class="normal"><div class="dialog-title"><a href="javascript:;" class="title left">#{title}</a><a href="javascript:;" class="close right">关闭</a></div><div class="dialog-content">#{content}</div><div class="dialog-footer" ></div></div>'),content:"",showClose:!0};return t=Object.extend(e,t),this._opts=t,this._ready(),this._constructFrame(),this._end(),this},_ready:function(){var t=$$(".dialog");t.each(function(t){t.remove()}),this._dialogEl=new Element("div",{"class":"dialog"})},_constructFrame:function(){var t=this._opts,e=this._dialogEl,i=t.frameTPL.evaluate({title:t.title,content:t.content});e.update(i),document.body.appendChild(e),this.resetPos(),this._footerEl=e.select(".dialog-footer").pop();var o=this._closeEl=e.select(".close").pop();t.showClose?o.observe("click",function(){e.remove()}):o.remove();var s=t.autoHide;s&&"number"==typeof s&&window.setTimeout(function(){e.remove()},1e3*s)},_end:function(){var t=this;Event.observe(window,"resize",function(){t.resetPos.call(t)})},setWidth:function(){return this},setContent:function(){return this},addButton:function(t,e){var i=new Element("input",{type:"button","class":"button",value:t});if(Object.isFunction(e)){var o=this;i.observe("click",function(){e.call(o)})}var s=this._footerEl;return s.appendChild(i),this},resetPos:function(){var t=this._dialogEl,e=t.getStyle("width"),i=t.getStyle("height"),o=document.viewport,s=this._opts.left||(o.getWidth()-parseInt(e))/2,n=this._opts.top||o.getScrollOffsets().top+(o.getHeight()-parseInt(i))/2;return t.setStyle({top:n+"px",left:s+"px"}),this},close:function(){this._dialogEl.remove()}});e.dialog=i});